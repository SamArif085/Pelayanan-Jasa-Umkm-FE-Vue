"use strict";(self["webpackChunkproject_pa"]=self["webpackChunkproject_pa"]||[]).push([[665],{237:function(a,e,t){t.d(e,{A:function(){return h}});var n=t(641),l=t(751);const s={class:"modal-backdrop"},i={class:"modal dialog-centered",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},o={class:"modal-header bg-primary text-light",id:"modalTitle"},r={class:"modal-body",id:"modalDescription"},c={class:"modal-footer"};function d(a,e,t,d,k,m){return(0,n.uX)(),(0,n.Wv)(l.eB,{name:"modal-fade"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",s,[(0,n.Lk)("div",i,[(0,n.Lk)("header",o,[(0,n.RG)(a.$slots,"header",{},(()=>[(0,n.eW)(" This is the default title! ")]),!0),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>m.close&&m.close(...a)),"aria-label":"Close"})]),(0,n.Lk)("section",r,[(0,n.RG)(a.$slots,"body",{},(()=>[(0,n.eW)(" This is the default body! ")]),!0)]),(0,n.Lk)("footer",c,[(0,n.RG)(a.$slots,"footer",{},(()=>[(0,n.eW)(" This is the default footer! ")]),!0),(0,n.Lk)("button",{type:"button",class:"btn btn-green",onClick:e[1]||(e[1]=(...a)=>m.close&&m.close(...a)),"aria-label":"Close modal"}," Close Modal ")])])])])),_:3})}var k={name:"BaseModal",methods:{close(){this.$emit("close")}}},m=t(262);const u=(0,m.A)(k,[["render",d],["__scopeId","data-v-7e1deee5"]]);var h=u},665:function(a,e,t){t.r(e),t.d(e,{default:function(){return N}});var n=t(641),l=t(751),s=t(33);const i={class:"container-fluid p-0"},o=(0,n.Lk)("h1",{class:"h3 mb-3 text-center"},[(0,n.Lk)("strong",null,"Layanan Admin")],-1),r=(0,n.Lk)("h2",{class:"modal-title"},"Form Data",-1),c={class:"card"},d={class:"card-body"},k={class:"mb-3"},m=(0,n.Lk)("label",{class:"form-label"},"Nama Layanan",-1),u={class:"mb-3"},h=(0,n.Lk)("label",{class:"form-label"},"Deskripsi",-1),b={class:"mb-3"},p=(0,n.Lk)("label",{class:"form-label"},"Gambar",-1),L={key:0},y=["src"],g={class:"mb-3"},f=(0,n.Lk)("label",{class:"form-label"},"Nama Teknisi",-1),v=(0,n.Lk)("option",{value:null,disabled:"",selected:""},"Pilih Teknisi",-1),C=["value"],w=(0,n.Lk)("br",null,null,-1),T={class:"row"},D={class:"col-12"},j={class:"card"},M={class:"card-body"},A={class:"table table-striped table-bordered nowrap table-hover",id:"example"},_=(0,n.Lk)("thead",{class:"text-center"},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"No"),(0,n.Lk)("th",null,"Layanan"),(0,n.Lk)("th",null,"Deskripsi"),(0,n.Lk)("th",null,"gambar"),(0,n.Lk)("th",null,"teknisi"),(0,n.Lk)("th",null,"Action")])],-1),B=["src"],E=["onClick"],S=["onClick"];function U(a,e,t,U,$,x){const X=(0,n.g2)("BaseModal");return(0,n.uX)(),(0,n.CE)("div",i,[o,(0,n.Lk)("div",null,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=a=>{$.showModal=!0,console.log("showModal:",$.showModal)})},"Tambah"),$.showModal?((0,n.uX)(),(0,n.Wv)(X,{key:0,ref:"baseModal",onClose:e[8]||(e[8]=a=>$.showModal=!1)},{header:(0,n.k6)((()=>[r,(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[1]||(e[1]=(...a)=>x.closeModal&&x.closeModal(...a)),"aria-label":"Close"})])),body:(0,n.k6)((()=>[(0,n.Lk)("div",c,[(0,n.Lk)("div",d,[(0,n.Lk)("form",{onSubmit:e[6]||(e[6]=(0,l.D$)(((...a)=>x.tambah&&x.tambah(...a)),["prevent"])),enctype:"multipart/form-data"},[(0,n.Lk)("div",k,[m,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>$.namaLayanan=a),class:"form-control",name:"nama_layanan",id:"nama_layanan",cols:"30",rows:"10"},null,512),[[l.Jo,$.namaLayanan]])]),(0,n.Lk)("div",u,[h,(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>$.Deskripsi=a),class:"form-control",name:"deskripsi",id:"deskripsi",cols:"30",rows:"10"},null,512),[[l.Jo,$.Deskripsi]])]),(0,n.Lk)("div",b,[p,$.gambar?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("img",{src:x.getImageUrl($.gambar),alt:"Gambar",width:"100",height:"100",class:"mb-3"},null,8,y)])):(0,n.Q3)("",!0),(0,n.Lk)("input",{type:"file",onChange:e[4]||(e[4]=(...a)=>x.onFileChange&&x.onFileChange(...a)),class:"form-control-file",name:"gambar",id:"gambar"},null,32)]),(0,n.Lk)("div",g,[f,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>$.selectnamaTeknisi=a),class:"form-select"},[v,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)($.namaTeknisi,(a=>((0,n.uX)(),(0,n.CE)("option",{key:a.id,value:a.id},(0,s.v_)(a.username),9,C)))),128))],512),[[l.u1,$.selectnamaTeknisi]])])],32)])])])),footer:(0,n.k6)((()=>[(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>x.tambah&&x.tambah(...a))},"Submit")])),_:1},512)):(0,n.Q3)("",!0)]),w,(0,n.Lk)("div",T,[(0,n.Lk)("div",D,[(0,n.Lk)("div",j,[(0,n.Lk)("div",M,[(0,n.Lk)("table",A,[_,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)($.DataLayanan,((a,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.id},[(0,n.Lk)("td",null,(0,s.v_)(e+1),1),(0,n.Lk)("td",null,(0,s.v_)(a.layanan),1),(0,n.Lk)("td",null,(0,s.v_)(a.deskripsi),1),(0,n.Lk)("td",null,[(0,n.Lk)("img",{src:x.getImageUrl(a.gambar),alt:"Gambar",width:"100",height:"100"},null,8,B)]),(0,n.Lk)("td",null,(0,s.v_)(a.username),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-warning",onClick:a=>x.editLayanan(e)}," Edit ",8,E),(0,n.eW)(" Â  "),(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:a=>x.deleteLayanan(e)}," Hapus ",8,S)])])))),128))])])])])])])])}var $=t(237),x=t(911),X=t.n(x),G=t(250),F={name:"LayananAdmin",mounted(){this.getData(),this.getUserTek(),X().replace()},data(){return{id:null,showModal:!1,DataLayanan:[],selectnamaTeknisi:null,namaLayanan:"",Deskripsi:"",gambar:"",currentGambar:null,namaTeknisi:[]}},components:{BaseModal:$.A},methods:{onFileChange(a){const e=a.target.files[0];this.gambar=e},getImageUrl(a){return`https://umkmbackend.pjjaka.com/${a}`},async getData(){try{const a=await G.A.get("https://umkmbackend.pjjaka.com/api/data-layanan");this.DataLayanan=a.data,console.log("cek",a.data)}catch(a){console.error(a)}},async getUserTek(){try{const a=await G.A.get("https://umkmbackend.pjjaka.com/api/get-usertek");this.namaTeknisi=a.data}catch(a){console.error(a)}},closeModal(){this.id=null,this.namaLayanan="",this.Deskripsi="",this.selectnamaTeknisi=null,this.$refs.baseModal.close()},editLayanan(a){const e=this.DataLayanan[a];this.id=e.id,console.log(e.id),this.namaLayanan=e.layanan,this.Deskripsi=e.deskripsi,this.teknisi=e.teknisi,this.gambar=e.gambar,this.selectnamaTeknisi=e.teknisi,this.showModal=!0},async deleteLayanan(a){const e=this.DataLayanan[a],t=e.id;Swal.fire({title:"Apakah Anda yakin?",text:"Anda tidak akan dapat mengembalikan tindakan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus saja!",cancelButtonText:"Batal"}).then((e=>{e.isConfirmed&&G.A.delete(`https://umkmbackend.pjjaka.com/api/delete-layanan/${t}`).then((e=>{console.log(e.data);const t="Data pengguna berhasil dihapus.";Swal.fire("Success",t,"success"),this.DataLayanan.splice(a,1)})).catch((a=>{console.error(a),Swal.fire("Error","Terjadi kesalahan saat menghapus data","error")}))}))},tambah(){const a=this.id?`https://umkmbackend.pjjaka.com/api/update-layanan/${this.id}`:"https://umkmbackend.pjjaka.com/api/tambah-layanan",e=(this.id,"post");G.A[e](a,{nama_layanan:this.namaLayanan,deskripsi:this.Deskripsi,gambar:this.gambar,teknisi:this.selectnamaTeknisi},{headers:{"Content-Type":"multipart/form-data"}}).then((a=>{console.log(a.data);const e="Data berhasil "+(this.id?"diubah":"disimpan");Swal.fire("Success",e,"success"),this.closeModal(),this.getData(),this.getUserTek()})).catch((a=>{console.error(a),Swal.fire("Error","Terjadi kesalahan saat menyimpan data","error")}))}}},I=t(262);const W=(0,I.A)(F,[["render",U]]);var N=W}}]);
//# sourceMappingURL=665.745824f9.js.map