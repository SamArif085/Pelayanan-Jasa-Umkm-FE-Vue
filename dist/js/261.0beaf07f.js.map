{"version":3,"file":"js/261.0beaf07f.js","mappings":"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","sources":["webpack://project-pa/./src/views/pages/Riwayat/RiwayatPembeli.vue","webpack://project-pa/./src/views/pages/Riwayat/RiwayatPembeli.vue?c992"],"sourcesContent":["<template>\r\n  <div class=\"container-fluid p-0\">\r\n    <h1 class=\"h3 mb-3 text-center\"><strong>Riwayat Pelanggan</strong></h1>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <table class=\"table table-striped table-bordered nowrap table-hover\" id=\"example\">\r\n              <thead class=\"text-center\">\r\n                <tr>\r\n                  <th>No</th>\r\n                  <th>Nama Elektronik</th>\r\n                  <th>Masalah</th>\r\n                  <th>Teknisi</th>\r\n                  <th>Tanggal</th>\r\n                  <th>Tanggal Selesai</th>\r\n                  <th>Status</th>\r\n                  <th>Deskripsi</th>\r\n                  <th>alamat</th>\r\n                  <th>Total Biaya</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(pesanan, index) in riwayatPesanan\" :key=\"pesanan.id\">\r\n                  <td>{{ index + 1 }}</td>\r\n                  <td>{{ pesanan.data_layanan.layanan }}</td>\r\n                  <td>{{ pesanan.masalah }}</td>\r\n                  <td :class=\"{ 'text-danger': !pesanan.username }\">{{ pesanan.username || 'Data kosong' }}</td>\r\n                  <template v-if=\"pesanan.tgl_pesan_awal\">\r\n                    <td>{{ formatDate(pesanan.tgl_pesan_awal) }}</td>\r\n                  </template>\r\n                  <template v-else>\r\n                    <td class=\"text-danger\">Data kosong</td>\r\n                  </template>\r\n                  <template v-if=\"pesanan.tgl_pesan_selesai\">\r\n                    <td>{{ formatDate(pesanan.tgl_pesan_selesai) }}</td>\r\n                  </template>\r\n                  <template v-else>\r\n                    <td class=\"text-danger\">Data kosong</td>\r\n                  </template>\r\n                  <td>\r\n                    <span v-if=\"pesanan.status === 0\" class=\"text-info\">Menunggu Konfirmasi</span>\r\n                    <span v-else-if=\"pesanan.status === 1\" class=\"text-warning\">Proses Pesanan</span>\r\n                    <span v-else-if=\"pesanan.status === 2\" class=\"text-warning\">Proses Pengerjaan</span>\r\n                    <span v-else-if=\"pesanan.status === 3\" class=\"text-success\">Pesanan Selesai</span>\r\n                    <span v-else-if=\"pesanan.status === 4\" class=\"text-danger\">Pesanan Dibatalkan</span>\r\n                  </td>\r\n                  <td :class=\"{ 'text-danger': !pesanan.deskripsi }\">{{ pesanan.deskripsi || 'Data kosong' }}</td>\r\n                  <td>{{ pesanan.alamat }}</td>\r\n                  <td :class=\"{ 'text-danger': !pesanan.harga_jasa || !pesanan.harga_alat }\">\r\n                    {{ calculateTotal(pesanan.harga_jasa, pesanan.harga_alat) || 'Pesanan kosong' }}\r\n                  </td>\r\n                  <td>\r\n                    <button v-if=\"pesanan.status === 0\" class=\"btn btn-danger\" @click=\"edit(pesanan.id)\">\r\n                      Cancel\r\n                    </button>\r\n                    <img v-else src=\"@/assets/check.svg\" alt=\"Gambar\" style=\"width: 24px; height: 24px;\">\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport feather from \"feather-icons\";\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: \"RiwayatPembeli\",\r\n\r\n  mounted() {\r\n    this.getData();\r\n    feather.replace();\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      riwayatPesanan: [],\r\n      status: '',\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    async getData() {\r\n      try {\r\n        const userData = JSON.parse(localStorage.getItem('user'));\r\n        const userID = userData.data.id;\r\n        const response = await axios.get(`https://umkmbackend.pjjaka.com/api/riwayat-pesanan/${userID}`);\r\n        this.riwayatPesanan = response.data;\r\n        console.log('cek', this.riwayatPesanan);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n\r\n    edit(id) {\r\n      Swal.fire({\r\n        title: 'Apakah Anda yakin?',\r\n        text: \"Anda ingin membatalkan pesanan ini?\",\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Ya, batalkan!',\r\n        cancelButtonText: 'Tidak'\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          axios.patch(`https://umkmbackend.pjjaka.com/api/cancel-pesanan/${id}`, { status: 4 })\r\n            .then(response => {\r\n              console.log(response.data);\r\n              Swal.fire(\r\n                'Dibatalkan!',\r\n                'Pesanan telah dibatalkan.',\r\n                'success'\r\n              );\r\n              const pesananIndex = this.riwayatPesanan.findIndex(pesanan => pesanan.id === id);\r\n              if (pesananIndex !== -1) {\r\n                this.riwayatPesanan[pesananIndex].status = 4;\r\n              }\r\n            })\r\n            .catch(error => {\r\n              console.error(error);\r\n              Swal.fire(\r\n                'Error',\r\n                'Terjadi kesalahan saat membatalkan pesanan.',\r\n                'error'\r\n              );\r\n            });\r\n        }\r\n      });\r\n    },\r\n\r\n    formatDate(dateString) {\r\n      const date = new Date(dateString);\r\n      const day = date.getDate();\r\n      const month = date.getMonth() + 1;\r\n      const year = date.getFullYear();\r\n      const formattedDate = `${day < 10 ? '0' : ''}${day}-${month < 10 ? '0' : ''}${month}-${year}`;\r\n\r\n      return formattedDate;\r\n    },\r\n\r\n    calculateTotal(hargaJasa, hargaAlat) {\r\n      if (!hargaJasa || !hargaAlat) {\r\n        return 'Data kosong';\r\n      }\r\n      const total = parseFloat(hargaJasa) + parseFloat(hargaAlat);\r\n      return total;\r\n    },\r\n  },\r\n};\r\n\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./RiwayatPembeli.vue?vue&type=template&id=d5273060\"\nimport script from \"./RiwayatPembeli.vue?vue&type=script&lang=js\"\nexport * from \"./RiwayatPembeli.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","id","src","alt","style","riwayatPesanan","pesanan","index","key","data_layanan","layanan","masalah","username","formatDate","tgl_pesan_awal","tgl_pesan_selesai","status","deskripsi","alamat","harga_jasa","harga_alat","calculateTotal","edit","name","mounted","this","getData","data","methods","userData","JSON","parse","localStorage","getItem","userID","response","axios","get","console","log","error","Swal","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","patch","pesananIndex","findIndex","catch","dateString","date","Date","day","getDate","month","getMonth","year","getFullYear","formattedDate","hargaJasa","hargaAlat","total","parseFloat","__exports__","render"],"sourceRoot":""}