"use strict";(self["webpackChunkproject_pa"]=self["webpackChunkproject_pa"]||[]).push([[932],{237:function(a,e,t){t.d(e,{A:function(){return h}});var s=t(641),l=t(751);const n={class:"modal-backdrop"},o={class:"modal dialog-centered",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},r={class:"modal-header bg-primary text-light",id:"modalTitle"},i={class:"modal-body",id:"modalDescription"},d={class:"modal-footer"};function c(a,e,t,c,k,u){return(0,s.uX)(),(0,s.Wv)(l.eB,{name:"modal-fade"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",o,[(0,s.Lk)("header",r,[(0,s.RG)(a.$slots,"header",{},(()=>[(0,s.eW)(" This is the default title! ")]),!0),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>u.close&&u.close(...a)),"aria-label":"Close"})]),(0,s.Lk)("section",i,[(0,s.RG)(a.$slots,"body",{},(()=>[(0,s.eW)(" This is the default body! ")]),!0)]),(0,s.Lk)("footer",d,[(0,s.RG)(a.$slots,"footer",{},(()=>[(0,s.eW)(" This is the default footer! ")]),!0),(0,s.Lk)("button",{type:"button",class:"btn btn-green",onClick:e[1]||(e[1]=(...a)=>u.close&&u.close(...a)),"aria-label":"Close modal"}," Close Modal ")])])])])),_:3})}var k={name:"BaseModal",methods:{close(){this.$emit("close")}}},u=t(262);const g=(0,u.A)(k,[["render",c],["__scopeId","data-v-7e1deee5"]]);var h=g},932:function(a,e,t){t.r(e),t.d(e,{default:function(){return Q}});var s=t(641),l=t(751),n=t(33);const o={class:"container-fluid p-0"},r=(0,s.Lk)("h1",{class:"h3 mb-3 text-center"},[(0,s.Lk)("strong",null,"Pesanan Teknisi")],-1),i=(0,s.Lk)("h2",{class:"modal-title"},"Form Data",-1),d={class:"card"},c={class:"card-body"},k={class:"mb-3"},u=(0,s.Lk)("label",{class:"form-label"},"Harga Jasa",-1),g={class:"mb-3"},h=(0,s.Lk)("label",{class:"form-label"},"Harga Alat",-1),p={class:"mb-3"},b=(0,s.Lk)("label",{class:"form-label"},"Tanggal Servis Selesai",-1),m={class:"mb-3"},L=(0,s.Lk)("label",{class:"form-label"},"Deskripsi",-1),v={class:"mb-3"},_=(0,s.Lk)("label",{class:"form-label"},"Status",-1),f=(0,s.Lk)("option",{value:"",disabled:"",selected:""},"Pilih Role",-1),y=["value"],C={class:"row"},D={class:"col-12"},S={class:"card"},j={class:"card-body"},w={class:"table table-striped table-bordered nowrap table-hover",id:"example"},x=(0,s.Lk)("thead",{class:"text-center"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"No"),(0,s.Lk)("th",null,"Nama Pelanggan"),(0,s.Lk)("th",null,"No.Telp"),(0,s.Lk)("th",null,"Layanan"),(0,s.Lk)("th",null,"Masalah"),(0,s.Lk)("th",null,"Tanggal Pesan"),(0,s.Lk)("th",null,"Tanggal Selesai"),(0,s.Lk)("th",null,"Harga Jasa"),(0,s.Lk)("th",null,"Harga Alat"),(0,s.Lk)("th",null,"Status"),(0,s.Lk)("th",null,"Deskripsi"),(0,s.Lk)("th",null,"Alamat"),(0,s.Lk)("th",null,"Total Harga"),(0,s.Lk)("th",null,"Action")])],-1),T={key:0},P={key:1,class:"text-danger"},M={key:2},X={key:3,class:"text-danger"},E={key:0},$={key:1,class:"text-warning"},A={key:2,class:"text-warning"},J={key:3,class:"text-danger"},B=["onClick"],F={key:1},W=(0,s.Lk)("td",{colspan:"12",class:"text-danger"},"Belum Ada Pesanan",-1),G=[W];function H(a,e,t,W,H,U){const V=(0,s.g2)("BaseModal");return(0,s.uX)(),(0,s.CE)("div",o,[r,(0,s.Lk)("div",null,[H.showModal?((0,s.uX)(),(0,s.Wv)(V,{key:0,ref:"baseModal",onClose:e[8]||(e[8]=a=>H.showModal=!1)},{header:(0,s.k6)((()=>[i,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>U.closeModal&&U.closeModal(...a)),"aria-label":"Close"})])),body:(0,s.k6)((()=>[(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[(0,s.Lk)("form",{onSubmit:e[6]||(e[6]=(0,l.D$)(((...a)=>U.edit&&U.edit(...a)),["prevent"]))},[(0,s.Lk)("div",k,[u,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>H.hargajasa=a),class:"form-control",name:"hargajasa",cols:"30",rows:"10"},null,512),[[l.Jo,H.hargajasa]])]),(0,s.Lk)("div",g,[h,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>H.hargaalat=a),class:"form-control",name:"hargaalat",cols:"30",rows:"10"},null,512),[[l.Jo,H.hargaalat]])]),(0,s.Lk)("div",p,[b,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>H.tglServis=a),class:"form-control form-control-lg",type:"date",name:"tgl_servis_selesai",placeholder:"Tanggal Servis Selesai"},null,512),[[l.Jo,H.tglServis]])]),(0,s.Lk)("div",m,[L,(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>H.deskripsi=a),class:"form-control",name:"deskripsi",cols:"30",rows:"10"},null,512),[[l.Jo,H.deskripsi]])]),(0,s.Lk)("div",v,[_,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>H.status=a),class:"form-select",id:"basic-usage","data-placeholder":"Choose one thing"},[f,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(H.statusOption,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.value,value:a.value},(0,n.v_)(a.label),9,y)))),128))],512),[[l.u1,H.status]])])],32)])])])),footer:(0,s.k6)((()=>[(0,s.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>U.edit&&U.edit(...a))},"Submit")])),_:1},512)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",C,[(0,s.Lk)("div",D,[(0,s.Lk)("div",S,[(0,s.Lk)("div",j,[(0,s.Lk)("table",w,[x,(0,s.Lk)("tbody",null,[H.DataPesananTeknisi.length>0?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(H.DataPesananTeknisi,((a,e)=>((0,s.uX)(),(0,s.CE)("tr",{key:a.id},[(0,s.Lk)("td",null,(0,n.v_)(e+1),1),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.user_pelanggan.username})},(0,n.v_)(a.user_pelanggan.username||"Data kosong"),3),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.user_pelanggan.no_telp})},(0,n.v_)(a.user_pelanggan.no_telp||"Data kosong"),3),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.data_layanan.layanan})},(0,n.v_)(a.data_layanan.layanan||"Data kosong"),3),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.masalah})},(0,n.v_)(a.masalah||"Data kosong"),3),a.tgl_pesan_awal?((0,s.uX)(),(0,s.CE)("td",T,(0,n.v_)(U.formatDate(a.tgl_pesan_awal)),1)):((0,s.uX)(),(0,s.CE)("td",P,"Data kosong")),a.tgl_pesan_selesai?((0,s.uX)(),(0,s.CE)("td",M,(0,n.v_)(U.formatDate(a.tgl_pesan_selesai)),1)):((0,s.uX)(),(0,s.CE)("td",X,"Data kosong")),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.harga_jasa})},(0,n.v_)(a.harga_jasa||"Data kosong"),3),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.harga_alat})},(0,n.v_)(a.harga_alat||"Data kosong"),3),(0,s.Lk)("td",null,[1===a.status?((0,s.uX)(),(0,s.CE)("span",E,"Menunggu Konfirmasi")):2===a.status?((0,s.uX)(),(0,s.CE)("span",$,"Proses Pengerjaan")):3===a.status?((0,s.uX)(),(0,s.CE)("span",A,"Perbaikan Selesai")):((0,s.uX)(),(0,s.CE)("span",J,"Data kosong"))]),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.deskripsi})},(0,n.v_)(a.deskripsi||"Data kosong"),3),(0,s.Lk)("td",null,(0,n.v_)(a.alamat),1),(0,s.Lk)("td",{class:(0,n.C4)({"text-danger":!a.harga_jasa||!a.harga_alat})},(0,n.v_)(U.calculateTotal(a.harga_jasa,a.harga_alat)||"Data kosong"),3),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-warning",onClick:a=>U.editpesanan(e)},"Edit",8,B),(0,s.eW)(" Â  ")])])))),128)):((0,s.uX)(),(0,s.CE)("tr",F,G))])])])])])])])}var U=t(237),V=t(911),I=t.n(V),K=t(250),N={name:"PesananTeknisi",mounted(){this.getData(),I().replace()},components:{BaseModal:U.A},data(){return{id:null,showModal:!1,DataPesananTeknisi:[],hargajasa:"",hargaalat:"",tglServis:"",deskripsi:"",status:"",statusOption:[{label:"Proses Pengerjaan",value:"2"},{label:"Perbaikan Selesai",value:"3"}]}},methods:{async getData(){try{const a=JSON.parse(localStorage.getItem("user")),e=a.data.id,t=await K.A.get(`https://umkmbackend.pjjaka.com/api/data-layanan-teknisi/${e}`);this.DataPesananTeknisi=t.data,console.log("cek",t.data)}catch(a){console.error(a)}},closeModal(){this.id=null,this.tglServis="",this.hargajasa="",this.hargaalat="",this.deskripsi="",this.status="",this.$refs.baseModal.close()},editpesanan(a){const e=this.DataPesananTeknisi[a];this.id=e.id,console.log(e.id),this.hargajasa=e.harga_jasa,this.hargaalat=e.harga_alat,this.status=e.status,this.tglServis=e.tgl_pesan_selesai,this.deskripsi=e.deskripsi,this.showModal=!0},async edit(){try{const a=await K.A.put(`https://umkmbackend.pjjaka.com/api/update-pesanan-teknisi/${this.id}`,{id:this.id,tglServis:this.tglServis,deskripsi:this.deskripsi,jasa:this.hargajasa,alat:this.hargaalat,status:this.status});a&&a.data&&a.data.error?(console.error(a.data.error),Swal.fire({icon:"error",title:"Gagal",text:"Gagal memperbarui data pengguna."})):(Swal.fire({icon:"success",title:"Berhasil",text:"Data berhasil disimpan!"}),this.getData(),this.closeModal(),this.$router.replace({path:"/Pesanan-Teknisi"}))}catch(a){console.error(a),Swal.fire({icon:"error",title:"Kesalahan",text:"Terjadi kesalahan saat memperbarui data."})}},formatDate(a){const e=new Date(a),t=e.getDate(),s=e.getMonth()+1,l=e.getFullYear(),n=`${t<10?"0":""}${t}-${s<10?"0":""}${s}-${l}`;return n},calculateTotal(a,e){if(!a||!e)return"Data kosong";const t=parseFloat(a)+parseFloat(e);return t}}},R=t(262);const O=(0,R.A)(N,[["render",H]]);var Q=O}}]);
//# sourceMappingURL=932.bb76a705.js.map