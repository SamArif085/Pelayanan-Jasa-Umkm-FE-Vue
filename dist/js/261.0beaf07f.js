"use strict";(self["webpackChunkproject_pa"]=self["webpackChunkproject_pa"]||[]).push([[261],{490:function(a,t,e){e.r(t),e.d(t,{default:function(){return S}});var n=e(641),s=e(33),l=e.p+"img/check.407bd204.svg";const r={class:"container-fluid p-0"},i=(0,n.Lk)("h1",{class:"h3 mb-3 text-center"},[(0,n.Lk)("strong",null,"Riwayat Pelanggan")],-1),o={class:"row"},c={class:"col-12"},u={class:"card"},k={class:"card-body"},d={class:"table table-striped table-bordered nowrap table-hover",id:"example"},g=(0,n.Lk)("thead",{class:"text-center"},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"No"),(0,n.Lk)("th",null,"Nama Elektronik"),(0,n.Lk)("th",null,"Masalah"),(0,n.Lk)("th",null,"Teknisi"),(0,n.Lk)("th",null,"Tanggal"),(0,n.Lk)("th",null,"Tanggal Selesai"),(0,n.Lk)("th",null,"Status"),(0,n.Lk)("th",null,"Deskripsi"),(0,n.Lk)("th",null,"alamat"),(0,n.Lk)("th",null,"Total Biaya"),(0,n.Lk)("th",null,"Action")])],-1),h={key:0},p={key:1,class:"text-danger"},m={key:2},y={key:3,class:"text-danger"},L={key:0,class:"text-info"},C={key:1,class:"text-warning"},b={key:2,class:"text-warning"},w={key:3,class:"text-success"},_={key:4,class:"text-danger"},f=["onClick"],v={key:1,src:l,alt:"Gambar",style:{width:"24px",height:"24px"}};function x(a,t,e,l,x,E){return(0,n.uX)(),(0,n.CE)("div",r,[i,(0,n.Lk)("div",o,[(0,n.Lk)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("div",k,[(0,n.Lk)("table",d,[g,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(x.riwayatPesanan,((a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.id},[(0,n.Lk)("td",null,(0,s.v_)(t+1),1),(0,n.Lk)("td",null,(0,s.v_)(a.data_layanan.layanan),1),(0,n.Lk)("td",null,(0,s.v_)(a.masalah),1),(0,n.Lk)("td",{class:(0,s.C4)({"text-danger":!a.username})},(0,s.v_)(a.username||"Data kosong"),3),a.tgl_pesan_awal?((0,n.uX)(),(0,n.CE)("td",h,(0,s.v_)(E.formatDate(a.tgl_pesan_awal)),1)):((0,n.uX)(),(0,n.CE)("td",p,"Data kosong")),a.tgl_pesan_selesai?((0,n.uX)(),(0,n.CE)("td",m,(0,s.v_)(E.formatDate(a.tgl_pesan_selesai)),1)):((0,n.uX)(),(0,n.CE)("td",y,"Data kosong")),(0,n.Lk)("td",null,[0===a.status?((0,n.uX)(),(0,n.CE)("span",L,"Menunggu Konfirmasi")):1===a.status?((0,n.uX)(),(0,n.CE)("span",C,"Proses Pesanan")):2===a.status?((0,n.uX)(),(0,n.CE)("span",b,"Proses Pengerjaan")):3===a.status?((0,n.uX)(),(0,n.CE)("span",w,"Pesanan Selesai")):4===a.status?((0,n.uX)(),(0,n.CE)("span",_,"Pesanan Dibatalkan")):(0,n.Q3)("",!0)]),(0,n.Lk)("td",{class:(0,s.C4)({"text-danger":!a.deskripsi})},(0,s.v_)(a.deskripsi||"Data kosong"),3),(0,n.Lk)("td",null,(0,s.v_)(a.alamat),1),(0,n.Lk)("td",{class:(0,s.C4)({"text-danger":!a.harga_jasa||!a.harga_alat})},(0,s.v_)(E.calculateTotal(a.harga_jasa,a.harga_alat)||"Pesanan kosong"),3),(0,n.Lk)("td",null,[0===a.status?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"btn btn-danger",onClick:t=>E.edit(a.id)}," Cancel ",8,f)):((0,n.uX)(),(0,n.CE)("img",v))])])))),128))])])])])])])])}var E=e(911),P=e.n(E),D=e(250),X={name:"RiwayatPembeli",mounted(){this.getData(),P().replace()},data(){return{riwayatPesanan:[],status:""}},methods:{async getData(){try{const a=JSON.parse(localStorage.getItem("user")),t=a.data.id,e=await D.A.get(`https://umkmbackend.pjjaka.com/api/riwayat-pesanan/${t}`);this.riwayatPesanan=e.data,console.log("cek",this.riwayatPesanan)}catch(a){console.error(a)}},edit(a){Swal.fire({title:"Apakah Anda yakin?",text:"Anda ingin membatalkan pesanan ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, batalkan!",cancelButtonText:"Tidak"}).then((t=>{t.isConfirmed&&D.A.patch(`https://umkmbackend.pjjaka.com/api/cancel-pesanan/${a}`,{status:4}).then((t=>{console.log(t.data),Swal.fire("Dibatalkan!","Pesanan telah dibatalkan.","success");const e=this.riwayatPesanan.findIndex((t=>t.id===a));-1!==e&&(this.riwayatPesanan[e].status=4)})).catch((a=>{console.error(a),Swal.fire("Error","Terjadi kesalahan saat membatalkan pesanan.","error")}))}))},formatDate(a){const t=new Date(a),e=t.getDate(),n=t.getMonth()+1,s=t.getFullYear(),l=`${e<10?"0":""}${e}-${n<10?"0":""}${n}-${s}`;return l},calculateTotal(a,t){if(!a||!t)return"Data kosong";const e=parseFloat(a)+parseFloat(t);return e}}},j=e(262);const T=(0,j.A)(X,[["render",x]]);var S=T}}]);
//# sourceMappingURL=261.0beaf07f.js.map