"use strict";(self["webpackChunkproject_pa"]=self["webpackChunkproject_pa"]||[]).push([[628],{237:function(a,e,t){t.d(e,{A:function(){return h}});var s=t(641),l=t(751);const n={class:"modal-backdrop"},i={class:"modal dialog-centered",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},o={class:"modal-header bg-primary text-light",id:"modalTitle"},d={class:"modal-body",id:"modalDescription"},r={class:"modal-footer"};function c(a,e,t,c,u,m){return(0,s.uX)(),(0,s.Wv)(l.eB,{name:"modal-fade"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",i,[(0,s.Lk)("header",o,[(0,s.RG)(a.$slots,"header",{},(()=>[(0,s.eW)(" This is the default title! ")]),!0),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>m.close&&m.close(...a)),"aria-label":"Close"})]),(0,s.Lk)("section",d,[(0,s.RG)(a.$slots,"body",{},(()=>[(0,s.eW)(" This is the default body! ")]),!0)]),(0,s.Lk)("footer",r,[(0,s.RG)(a.$slots,"footer",{},(()=>[(0,s.eW)(" This is the default footer! ")]),!0),(0,s.Lk)("button",{type:"button",class:"btn btn-green",onClick:e[1]||(e[1]=(...a)=>m.close&&m.close(...a)),"aria-label":"Close modal"}," Close Modal ")])])])])),_:3})}var u={name:"BaseModal",methods:{close(){this.$emit("close")}}},m=t(262);const k=(0,m.A)(u,[["render",c],["__scopeId","data-v-7e1deee5"]]);var h=k},628:function(a,e,t){t.r(e),t.d(e,{default:function(){return K}});var s=t(641),l=t(751),n=t(33);const i={class:"container-fluid p-0"},o=(0,s.Lk)("h1",{class:"h3 mb-3 text-center"},[(0,s.Lk)("strong",null,"Pesanan Admin")],-1),d=(0,s.Lk)("h2",{class:"modal-title"},"Form Data",-1),r={class:"card"},c={class:"card-body"},u={class:"mb-3"},m=(0,s.Lk)("label",{class:"form-label"},"Nama Admin",-1),k={class:"mb-3"},h=(0,s.Lk)("label",{class:"form-label"},"Nama Teknisi",-1),b=(0,s.Lk)("option",{value:null,disabled:"",selected:""},"Pilih Teknisi",-1),p=["value"],L={class:"mb-3"},v=(0,s.Lk)("label",{class:"form-label"},"Status",-1),g=(0,s.Lk)("option",{value:"",disabled:"",selected:""},"Pilih Status",-1),f=["value"],y={class:"row"},C={class:"col-12"},A={class:"card"},T={class:"card-body"},_={class:"table table-striped table-bordered nowrap table-hover",id:"example"},w=(0,s.Lk)("thead",{class:"text-center"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"No"),(0,s.Lk)("th",null,"Nama Pelanggan"),(0,s.Lk)("th",null,"Layanan"),(0,s.Lk)("th",null,"Masalah"),(0,s.Lk)("th",null,"No.Telp"),(0,s.Lk)("th",null,"Status"),(0,s.Lk)("th",null,"Action")])],-1),M={key:0},P={key:1},D=["onClick"],X={key:1},E=(0,s.Lk)("td",{colspan:"12",class:"text-danger"},"Belum Ada Pesanan",-1),S=[E];function j(a,e,t,E,j,x){const $=(0,s.g2)("BaseModal");return(0,s.uX)(),(0,s.CE)("div",i,[o,(0,s.Lk)("div",null,[j.showModal?((0,s.uX)(),(0,s.Wv)($,{key:0,ref:"baseModal",onClose:e[7]||(e[7]=a=>j.showModal=!1)},{header:(0,s.k6)((()=>[d,(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>x.closeModal&&x.closeModal(...a)),"aria-label":"Close"})])),body:(0,s.k6)((()=>[(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[(0,s.Lk)("form",{onSubmit:e[5]||(e[5]=(0,l.D$)(((...a)=>x.edit&&x.edit(...a)),["prevent"]))},[(0,s.Lk)("div",u,[m,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>a.namaadmin=e),class:"form-control",name:"namaadmin",cols:"30",rows:"10",readonly:""},null,512),[[l.Jo,a.namaadmin]])]),(0,s.Lk)("div",k,[h,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>j.selectnamaTeknisi=a),class:"form-select"},[b,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.namaTeknisi,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.id,value:a.id},(0,n.v_)(a.username),9,p)))),128))],512),[[l.u1,j.selectnamaTeknisi]])]),(0,s.Lk)("div",L,[v,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>j.status=a),class:"form-select",onChange:e[4]||(e[4]=(...e)=>a.setRole&&a.setRole(...e))},[g,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.statusOption,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.value,value:a.value},(0,n.v_)(a.label),9,f)))),128))],544),[[l.u1,j.status]])])],32)])])])),footer:(0,s.k6)((()=>[(0,s.Lk)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>x.edit&&x.edit(...a))},"Submit")])),_:1},512)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",y,[(0,s.Lk)("div",C,[(0,s.Lk)("div",A,[(0,s.Lk)("div",T,[(0,s.Lk)("table",_,[w,(0,s.Lk)("tbody",null,[j.DataPesananAdmin.length>0?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(j.DataPesananAdmin,((a,e)=>((0,s.uX)(),(0,s.CE)("tr",{key:a.id},[(0,s.Lk)("td",null,(0,n.v_)(e+1),1),(0,s.Lk)("td",null,(0,n.v_)(a.user_pelanggan.username),1),(0,s.Lk)("td",null,(0,n.v_)(a.data_layanan.layanan),1),(0,s.Lk)("td",null,(0,n.v_)(a.masalah),1),(0,s.Lk)("td",null,(0,n.v_)(a.user_pelanggan.no_telp),1),(0,s.Lk)("td",null,[0===a.status?((0,s.uX)(),(0,s.CE)("span",M,"Menunggu Konfirmasi")):((0,s.uX)(),(0,s.CE)("span",P,(0,n.v_)(a.status),1))]),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-warning",onClick:a=>x.editpesanan(e)},"Edit",8,D),(0,s.eW)(" Â  ")])])))),128)):((0,s.uX)(),(0,s.CE)("tr",X,S))])])])])])])])}var x=t(237),$=t(911),B=t.n($),N=t(250),W={name:"PesananAdmin",mounted(){this.getData(),this.getUserTek(),B().replace();const a=JSON.parse(localStorage.getItem("user"));this.idAdmin=a.data.id,this.usernameAdmin=a.data.username},components:{BaseModal:x.A},data(){return{id:null,showModal:!1,DataPesananAdmin:[],status:"",statusOption:[{label:"Proses Pesanan",value:"1"},{label:"Pesanan Dibatalkan",value:"4"}],namaTeknisi:[],selectnamaTeknisi:null}},methods:{async getData(){try{const a=await N.A.get("https://umkmbackend.pjjaka.com/api/get-pesanan-admin");this.DataPesananAdmin=a.data}catch(a){console.error(a)}},async getUserTek(){try{const a=await N.A.get("https://umkmbackend.pjjaka.com/api/get-usertek");this.namaTeknisi=a.data}catch(a){console.error(a)}},closeModal(){this.id=null,this.namaadmin="",this.namateknisi="",this.status="",this.selectnamaTeknisi=null,this.$refs.baseModal.close()},editpesanan(a){if(a>=0&&a<this.DataPesananAdmin.length){const e=this.DataPesananAdmin[a];this.id=e.id,this.namaadmin=this.usernameAdmin,this.namateknisi=this.selectnamaTeknisi,this.status=this.status,this.selectnamaTeknisi=e.id_teknisi,this.showModal=!0}},async edit(){try{const a=await N.A.put(`https://umkmbackend.pjjaka.com/api/update-pesanan-admin/${this.id}`,{id:this.id,id_admin:this.idAdmin,id_teknisi:this.selectnamaTeknisi,status:this.status});a&&a.data&&a.data.error?(console.error(a.data.error),Swal.fire({icon:"error",title:"Gagal",text:"Gagal memperbarui data pengguna."})):(Swal.fire({icon:"success",title:"Berhasil",text:"Data berhasil disimpan!"}),console.log(a.data),this.getData(),this.closeModal(),this.$router.replace({path:"/Pesanan-admin"}))}catch(a){console.error(a),Swal.fire({icon:"error",title:"Kesalahan",text:"Terjadi kesalahan saat memperbarui data."})}}}},G=t(262);const I=(0,G.A)(W,[["render",j]]);var K=I}}]);
//# sourceMappingURL=628.9a6d328b.js.map