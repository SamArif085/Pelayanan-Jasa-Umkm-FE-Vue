"use strict";(self["webpackChunkproject_pa"]=self["webpackChunkproject_pa"]||[]).push([[527],{527:function(a,e,l){l.r(e),l.d(e,{default:function(){return P}});var t=l(641),s=l(751),n=l(33);const r={class:"container-fluid p-0"},o=(0,t.Lk)("h1",{class:"h3 mb-3"},[(0,t.Lk)("strong",null,"Pesan Servis Pelanggan")],-1),i={class:"row"},c={class:"col-12"},m={class:"card"},d={class:"card-body"},k={class:"mb-3"},p=(0,t.Lk)("label",{class:"form-label"},"Nama Elektronik",-1),u=(0,t.Lk)("option",{value:null,disabled:""},"Pilih Elektronik",-1),g=["value"],h={class:"mb-3"},b=(0,t.Lk)("label",{class:"form-label"},"Detail Masalah",-1),v={class:"mb-3"},f=(0,t.Lk)("label",{class:"form-label"},"Tanggal Servis",-1),L={class:"mb-3"},E=(0,t.Lk)("label",{class:"form-label"},"Alamat pelanggan",-1),S=(0,t.Lk)("div",{class:"mb-3"},[(0,t.Lk)("button",{type:"submit",class:"btn btn-success"},"Pesan")],-1);function y(a,e,l,y,w,_){return(0,t.uX)(),(0,t.CE)("div",r,[o,(0,t.Lk)("div",i,[(0,t.Lk)("div",c,[(0,t.Lk)("div",m,[(0,t.Lk)("div",d,[(0,t.Lk)("form",{onSubmit:e[4]||(e[4]=(0,s.D$)(((...a)=>_.pesan&&_.pesan(...a)),["prevent"]))},[(0,t.Lk)("div",k,[p,(0,t.bo)((0,t.Lk)("select",{ref:"select2","onUpdate:modelValue":e[0]||(e[0]=a=>w.selectedNamaElektronik=a),class:"form-control"},[u,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(w.namaElektronikOptions,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.id,value:a.id},(0,n.v_)(a.layanan),9,g)))),128))],512),[[s.u1,w.selectedNamaElektronik]])]),(0,t.Lk)("div",h,[b,(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>w.detailMasalah=a),class:"form-control",name:"detail_masalah",id:"detail_masalah",cols:"30",rows:"10"},null,512),[[s.Jo,w.detailMasalah]])]),(0,t.Lk)("div",v,[f,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>w.tglServis=a),class:"form-control form-control-lg",type:"date",name:"tgl_servis",placeholder:"Tanggal Servis"},null,512),[[s.Jo,w.tglServis]])]),(0,t.Lk)("div",L,[E,(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>w.alamat=a),class:"form-control form-control-lg",name:"alamat",placeholder:"Alamat pelanggan"},null,512),[[s.Jo,w.alamat]])]),S],32)])])])])])}var w=l(911),_=l.n(w),N=l(250),O={name:"PesanServis",mounted(){const a=JSON.parse(localStorage.getItem("user")),e=a.data.id;this.id_pelanggan=e,_().replace(),this.getNamaElektronikOptions();const l=new Date,t=252e5,s=l.getTime(),n=new Date(s+t),r=n.toISOString().split("T")[0];this.tglServis=r},data(){return{selectedNamaElektronik:null,namaElektronikOptions:[],detailMasalah:"",tglServis:"",id_pelanggan:"",alamat:""}},methods:{async getNamaElektronikOptions(){try{const a=await N.A.get("https://umkmbackend.pjjaka.com/api/nama-elektronik");this.namaElektronikOptions=a.data}catch(a){console.error(a)}},async pesan(){try{const a=this.namaElektronikOptions.find((a=>a.id===this.selectedNamaElektronik)),e=await N.A.post("https://umkmbackend.pjjaka.com/api/submit-pesanan",{layanan:a.id,masalah:this.detailMasalah,tgl_pesan:this.tglServis,id_pelanggan:this.id_pelanggan,alamat:this.alamat});e&&e.data&&e.data.error?(console.error(e.data.error),Swal.fire("Error","Gagal menyimpan pesanan.","error")):(Swal.fire("Berhasil","Pesanan berhasil disimpan.","success"),console.log(e.data),this.selectedNamaElektronik=null,this.detailMasalah="",this.tglServis="",this.$router.replace({path:"/pesan-servis-pelanggan"}))}catch(a){console.error(a),Swal.fire("Error","Terjadi kesalahan saat menyimpan pesanan.","error")}}}},j=l(262);const M=(0,j.A)(O,[["render",y]]);var P=M}}]);
//# sourceMappingURL=527.cc84e4c3.js.map